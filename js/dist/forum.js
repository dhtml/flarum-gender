(()=>{var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r);const t=flarum.core.compat["forum/app"];var n=e.n(t);const o=flarum.core.compat["common/extend"],a=flarum.core.compat["forum/components/SettingsPage"];var s=e.n(a);const d=flarum.core.compat["common/models/User"];var i=e.n(d);const l=flarum.core.compat["common/Model"];var u=e.n(l);const f=flarum.core.compat["forum/components/UserCard"];var c=e.n(f);const g=flarum.core.compat["forum/components/EditUserModal"];var p=e.n(g);const v=flarum.core.compat["forum/components/CommentPost"];var h=e.n(v);const b=flarum.core.compat["common/utils/Stream"];var y=e.n(b);const x=flarum.core.compat["forum/components/SignUpModal"];var O=e.n(x);const S=flarum.core.compat["forum/components/WelcomeHero"];var N=e.n(S);function _(e,r){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},_(e,r)}const G=flarum.core.compat.Component;var P=function(e){var r,t;function o(){return e.apply(this,arguments)||this}t=e,(r=o).prototype=Object.create(t.prototype),r.prototype.constructor=r,_(r,t);var a=o.prototype;return a.oninit=function(r){e.prototype.oninit.call(this,r),this.gender=n().session.user.gender()},a.view=function(e){return m("fieldset",{className:"Settings-theme"},m("legend",null,n().translator.trans("dhtml-gender.forum.inputGender")),m("select",{className:"FormControl gender",id:"gender",name:"gender",value:this.gender,onblur:this.saveValue.bind(this)},m("option",{value:"",disabled:!0,selected:!0},n().translator.trans("dhtml-gender.forum.clickToSelectGender")),m("option",{value:"male"},n().translator.trans("dhtml-gender.forum.male")),m("option",{value:"female"},n().translator.trans("dhtml-gender.forum.female")),m("option",{value:"other"},n().translator.trans("dhtml-gender.forum.other"))))},a.saveValue=function(e){n().session.user.save({gender:e.target.value}).then(n().alerts.show({type:"success"},n().translator.trans("dhtml-gender.forum.genderSaved")))},o}(e.n(G)());n().initializers.add("dhtml/flarum-gender",(function(){i().prototype.gender=u().attribute("gender"),(0,o.override)(N().prototype,"view",(function(e){if(n().session.user&&n().session.user.isEmailConfirmed()){if(null!=n().session.user.data.attributes.gender&&""!=n().session.user.data.attributes.gender)return e();if(!0===n().forum.attribute("dhtml-gender.setGenderBindLogin"))return m("div.Alert",[m("div.container",[m("span.alert-danger",n().translator.trans("dhtml-gender.forum.binding_gender")),m("a.bind.Button--primary[href="+n().forum.attribute("baseUrl")+"/settings]",n().translator.trans("dhtml-gender.forum.binding_gender_click"))])])}return e()})),(0,o.extend)(s().prototype,"settingsItems",(function(e){e.add("gender",m(P,null))})),(0,o.extend)(c().prototype,"infoItems",(function(e){var r=this.attrs.user.gender();""!==r&&null!=r&&("male"==r?e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-mars"})," m"))):"female"==r&&e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-venus"})," f"))))})),(0,o.extend)(p().prototype,"oninit",(function(){this.gender=y()(this.attrs.user.gender())})),(0,o.extend)(p().prototype,"fields",(function(e){e.add("gender",m("div",{className:"Form-group"},m("label",null,n().translator.trans("dhtml-gender.forum.inputGender")),m("input",{className:"FormControl",bidi:this.gender})),1)})),(0,o.extend)(p().prototype,"data",(function(e){var r=this.attrs.user;this.gender()!==r.gender()&&(e.gender=this.gender())})),(0,o.extend)(h().prototype,"headerItems",(function(e){if(!0===n().forum.attribute("dhtml-gender.showGendersOnPosts"))if(!0===n().forum.attribute("dhtml-gender.showGendersOnPosts_text")){var r=this.attrs.post.user();if(!r)return;var t=r.gender();if(""===t)return;if(void 0===t)return;if(null===t)return;if(!r)return;"male"==t?e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-mars"})," m")),11):"female"==t&&e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-venus"})," f")),11)}else{var o=this.attrs.post.user();if(!o)return;var a=o.gender();if(""===a)return;if(void 0===a)return;if(null===a)return;if(!o)return;"male"==a?e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-mars"})," m"))):"female"==a&&e.add("gender",m("div",{className:"ipinfo gender-v2",id:"gender"},m("strong",null,m("i",{class:"fa fa-venus"})," f")))}})),(0,o.extend)(O().prototype,"oninit",(function(){n().forum.attribute("dhtml-gender.setGenderOnRegistration")&&(this.gender=y()(""))})),(0,o.extend)(O().prototype,"fields",(function(e){n().forum.attribute("dhtml-gender.setGenderOnRegistration")&&e.add("gender",m("div",{className:"Form-group"},m("select",{style:"width: 100%; margin: 0 auto; text-align: center; height: 50px;",className:"FormControl gender",id:"gender",name:"gender",placeholder:"Gender","aria-invalid":"false"},m("option",{value:"",disabled:!0,selected:!0},n().translator.trans("dhtml-gender.forum.clickToSelectGender")),m("option",{value:"male"},n().translator.trans("dhtml-gender.forum.male")),m("option",{value:"female"},n().translator.trans("dhtml-gender.forum.female")),m("option",{value:"other"},n().translator.trans("dhtml-gender.forum.other")))),20)})),(0,o.extend)(O().prototype,"submitData",(function(e){if(n().forum.attribute("dhtml-gender.setGenderOnRegistration")){var r=document.querySelector(".FormControl.gender"),t=r.options[r.selectedIndex].value;e.gender=t}}))}))})(),module.exports=r})();
//# sourceMappingURL=forum.js.map